<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Mybatis | Zeus's Blog</title><meta name="author" content="Zeus"><meta name="copyright" content="Zeus"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="第一章 初识Mybatis">
<meta property="og:type" content="article">
<meta property="og:title" content="Mybatis">
<meta property="og:url" content="http://sktt1-zeus.top/2022/05/19/Mybatis/index.html">
<meta property="og:site_name" content="Zeus&#39;s Blog">
<meta property="og:description" content="第一章 初识Mybatis">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://sktt1-zeus.top/img/toububeijing.jpg">
<meta property="article:published_time" content="2022-05-18T16:11:00.000Z">
<meta property="article:modified_time" content="2022-05-23T08:13:04.751Z">
<meta property="article:author" content="Zeus">
<meta property="article:tag" content="Mybatis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://sktt1-zeus.top/img/toububeijing.jpg"><link rel="shortcut icon" href="/img/1.jpg"><link rel="canonical" href="http://sktt1-zeus.top/2022/05/19/Mybatis/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Zeus","link":"链接: ","source":"来源: Zeus's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Mybatis',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://www.fomal.cc/static/css/runtime.min.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (true) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background-image: url(url(/img/zhutibeijing.jpg));"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/touxiang.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/toububeijing.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Zeus's Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Mybatis</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Mybatis</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-18T16:11:00.000Z" title="发表于 2022-05-19 00:11:00">2022-05-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-23T08:13:04.751Z" title="更新于 2022-05-23 16:13:04">2022-05-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Mybatis/">Mybatis</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2022-05-23 16:13:04&quot;}" hidden></div><h3 id="第一章-初识Mybatis"><a href="#第一章-初识Mybatis" class="headerlink" title="第一章 初识Mybatis"></a>第一章 初识Mybatis</h3><span id="more"></span>

<h4 id="1-1-框架概述"><a href="#1-1-框架概述" class="headerlink" title="1.1 框架概述"></a>1.1 框架概述</h4><ul>
<li><h4 id="生活中“框架”"><a href="#生活中“框架”" class="headerlink" title="生活中“框架”"></a>生活中“框架”</h4><ul>
<li>买房子</li>
<li>笔记本电脑</li>
</ul>
</li>
<li><p>程序中框架【代码半成品】</p>
<ul>
<li>Mybatis框架：持久化层框架【dao层】</li>
<li>SpringMVC框架：控制层框架【Servlet层】</li>
<li>Spring框架：全能…</li>
</ul>
</li>
</ul>
<h4 id="1-2-Mybatis简介"><a href="#1-2-Mybatis简介" class="headerlink" title="1.2 Mybatis简介"></a>1.2 Mybatis简介</h4><ul>
<li><p>Mybatis是一个<strong>半自动化</strong>持久化层<strong>ORM</strong>框架</p>
</li>
<li><p>ORM：Object Relational Mapping【对象  关系  映射】</p>
<ul>
<li>将Java中的<strong>对象</strong>与数据库中<strong>表</strong>建议<strong>映射关系</strong>，优势：操作Java中的对象，就可以影响数据库中表的数据</li>
</ul>
</li>
<li><p>Mybatis与Hibernate对比</p>
<ul>
<li>Mybatis是一个半自动化【需要手写SQL】</li>
<li>Hibernate是全自动化【无需手写SQL】</li>
</ul>
</li>
<li><p>Mybatis与JDBC对比</p>
<ul>
<li>JDBC中的SQL与Java代码耦合度高</li>
<li>Mybatis将SQL与Java代码解耦</li>
</ul>
</li>
<li><p>Java POJO（Plain Old Java Objects，普通老式 Java 对象）</p>
<ul>
<li>JavaBean  等同于  POJO</li>
</ul>
</li>
</ul>
<h4 id="1-3-官网地址"><a href="#1-3-官网地址" class="headerlink" title="1.3 官网地址"></a>1.3 官网地址</h4><ul>
<li>文档地址：<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/">https://mybatis.org/mybatis-3/</a></li>
<li>源码地址：<a target="_blank" rel="noopener" href="https://github.com/mybatis/mybatis-3">https://github.com/mybatis/mybatis-3</a></li>
</ul>
<h3 id="第二章-搭建Mybatis框架"><a href="#第二章-搭建Mybatis框架" class="headerlink" title="第二章 搭建Mybatis框架"></a>第二章 搭建Mybatis框架</h3><blockquote>
<p>导入jar包</p>
<p>编写配置文件</p>
<p>使用核心类库</p>
</blockquote>
<h4 id="2-1-准备"><a href="#2-1-准备" class="headerlink" title="2.1 准备"></a>2.1 准备</h4><ul>
<li>建库建表建约束</li>
<li>准备maven工程</li>
</ul>
<h4 id="2-2-搭建Mybatis框架步骤"><a href="#2-2-搭建Mybatis框架步骤" class="headerlink" title="2.2 搭建Mybatis框架步骤"></a>2.2 搭建Mybatis框架步骤</h4><ol>
<li><p>导入jar包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--导入MySQL的驱动包--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.37<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--导入MyBatis的jar包--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写<strong>核心配置文件</strong>【mybatis-config.xml】</p>
<ul>
<li><p>位置：resources目标下</p>
</li>
<li><p>名称：推荐使用mybatis-config.xml</p>
</li>
<li><p>示例代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                mysql8版本--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/db220106?serverTimezone=UTC&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                mysql5版本--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db220106&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    设置映射文件路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/EmployeeMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>书写相关接口及<strong>映射文件</strong></p>
<ul>
<li><p>映射文件位置：resources&#x2F;mapper</p>
</li>
<li><p>映射文件名称：XXXMapper.xml</p>
</li>
<li><p><strong>映射文件作用：主要作用为Mapper接口书写Sql语句</strong></p>
<ul>
<li>映射文件名与接口名一致</li>
<li>映射文件namespace与接口全类名一致</li>
<li>映射文件SQL的Id与接口的方法名一致</li>
</ul>
</li>
<li><p>示例代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatis.mapper.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.pojo.Employee&quot;</span>&gt;</span></span><br><span class="line">        SELECT</span><br><span class="line">            id,</span><br><span class="line">            last_name,</span><br><span class="line">            email,</span><br><span class="line">            salary</span><br><span class="line">        FROM</span><br><span class="line">            tbl_employee</span><br><span class="line">        WHERE</span><br><span class="line">            id=#&#123;empId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>测试【SqlSession】</p>
<ul>
<li>先获取SqlSessionFactory对象</li>
<li>再获取SqlSession对象</li>
<li>通过SqlSession对象获取XXXMapper代理对象</li>
<li>测试</li>
</ul>
</li>
</ol>
<h4 id="2-3-添加Log4j日志框架"><a href="#2-3-添加Log4j日志框架" class="headerlink" title="2.3 添加Log4j日志框架"></a>2.3 添加Log4j日志框架</h4><ul>
<li><p>导入jar包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- log4j --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写配置文件</p>
<ul>
<li><p>配置文件名称：log4j.xml</p>
</li>
<li><p>配置文件位置：resources</p>
</li>
<li><p>示例代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">log4j</span>:configuration <span class="keyword">SYSTEM</span> <span class="string">&quot;log4j.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">log4j:configuration</span> <span class="attr">xmlns:log4j</span>=<span class="string">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;Encoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ConversionPattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125; %m  (%F:%L) \n&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="第三章-Mybatis核心配置详解【mybatis-config-xml】"><a href="#第三章-Mybatis核心配置详解【mybatis-config-xml】" class="headerlink" title="第三章 Mybatis核心配置详解【mybatis-config.xml】"></a>第三章 Mybatis核心配置详解【mybatis-config.xml】</h3><h4 id="3-1-核心配置文件概述"><a href="#3-1-核心配置文件概述" class="headerlink" title="3.1 核心配置文件概述"></a>3.1 核心配置文件概述</h4><ul>
<li>MyBatis 的配置文件包含了会深深影响 MyBatis 行为的设置和属性信息。</li>
</ul>
<h4 id="3-2-核心配置文件根标签"><a href="#3-2-核心配置文件根标签" class="headerlink" title="3.2 核心配置文件根标签"></a>3.2 核心配置文件根标签</h4><ul>
<li>没有实际语义，主要作用：所有子标签均需要设置在跟标签内部</li>
</ul>
<h4 id="3-3-核心配置文件常用子标签"><a href="#3-3-核心配置文件常用子标签" class="headerlink" title="3.3 核心配置文件常用子标签"></a>3.3 核心配置文件常用子标签</h4><ul>
<li><p>properties子标签</p>
<ul>
<li><p>作用：定义或引入外部属性文件</p>
</li>
<li><p>示例代码</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#key=value</span></span><br><span class="line"><span class="attr">db.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">db.url</span>=<span class="string">jdbc:mysql://localhost:3306/db220106</span></span><br><span class="line"><span class="attr">db.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">db.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                mysql8版本--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/db220106?serverTimezone=UTC&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                mysql5版本--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;db.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;db.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;db.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;db.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>settings子标签</p>
<ul>
<li><p>作用：这是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。 </p>
</li>
<li><p><strong>mapUnderscoreToCamelCase</strong>属性：是否开启驼峰命名自动映射，默认值false，如设置true会自动将</p>
<p>字段a_col与aCol属性自动映射</p>
<ul>
<li><strong>注意：只能将字母相同的字段与属性自动映射</strong></li>
</ul>
</li>
</ul>
</li>
<li><p>类型别名（typeAliases）</p>
<ul>
<li><p>作用：类型别名可为 Java 类型设置一个缩写名字。</p>
</li>
<li><p>语法及特点</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        为指定类型定义别名--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;typeAlias type=&quot;com.atguigu.mybatis.pojo.Employee&quot; alias=&quot;employee&quot;&gt;&lt;/typeAlias&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        为指定包下所有的类定义别名</span></span><br><span class="line"><span class="comment">                默认将类名作为别名，不区分大小写【推荐使用小写字母】</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.atguigu.mybatis.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Mybatis自定义别名</p>
<table>
<thead>
<tr>
<th>别名</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>_int</td>
<td>int</td>
</tr>
<tr>
<td>integer或int</td>
<td>Integer</td>
</tr>
<tr>
<td>string</td>
<td>String</td>
</tr>
<tr>
<td>list或arraylist</td>
<td>ArrayList</td>
</tr>
<tr>
<td>map或hashmap</td>
<td>HashMap</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>环境配置（environments）</p>
<ul>
<li><p>作用：设置数据库连接环境</p>
</li>
<li><p>示例代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    设置数据库连接环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                mysql8版本--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/db220106?serverTimezone=UTC&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                mysql5版本--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;db.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;db.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;db.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;db.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>mappers子标签</p>
<ul>
<li><p>作用：设置映射文件路径</p>
</li>
<li><p>示例代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    设置映射文件路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/EmployeeMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 要求：接口的包名与映射文件的包名需要一致--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;package name=&quot;com.atguigu.mybatis.mapper&quot;/&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>注意：核心配置中的子标签，是有顺序要求的。</p>
<p>第四章 Mybatis映射文件详解</p>
<p><img src="/Mybatis/image-20220321153852708.png" alt="image-20220321153852708"></p>
</li>
</ul>
<h4 id="4-1-映射文件概述"><a href="#4-1-映射文件概述" class="headerlink" title="4.1 映射文件概述"></a>4.1 映射文件概述</h4><ul>
<li>MyBatis 的真正强大在于它的语句映射，这是它的魔力所在。</li>
<li>如果拿它跟具有相同功能的 JDBC 代码进行对比，你会立即发现省掉了将近 <strong>95%</strong> 的代码。</li>
</ul>
<h4 id="4-2-映射文件根标签"><a href="#4-2-映射文件根标签" class="headerlink" title="4.2 映射文件根标签"></a>4.2 映射文件根标签</h4><ul>
<li>mapper标签</li>
<li>mapper中的namespace要求与接口的全类名一致</li>
</ul>
<h4 id="4-3-映射文件子标签"><a href="#4-3-映射文件子标签" class="headerlink" title="4.3 映射文件子标签"></a>4.3 映射文件子标签</h4><blockquote>
<p>子标签共有9个，注意学习其中8大子标签</p>
</blockquote>
<ul>
<li>insert标签：定义添加SQL</li>
<li>delete标签：定义删除SQL</li>
<li>update标签：定义修改SQL</li>
<li>select标签：定义查询SQL</li>
<li>sql标签：定义可重用的SQL语句块</li>
<li>cache标签：设置当前命名空间的缓存配置</li>
<li>cache-ref标签：设置其他命名空间的缓存配置</li>
<li><strong>resultMap标签：</strong>描述如何从数据库结果集中加载对象<ul>
<li>resultType解决不了的问题，交个resultMap。</li>
</ul>
</li>
</ul>
<h4 id="4-4-映射文件中常用属性"><a href="#4-4-映射文件中常用属性" class="headerlink" title="4.4 映射文件中常用属性"></a>4.4 映射文件中常用属性</h4><ul>
<li>resultType：设置期望结果集返回类型【全类名或别名】<ul>
<li>注意：如果返回的是集合，那应该设置为<strong>集合包含的类型</strong>，而不是集合本身的类型。 </li>
<li>resultType 和 resultMap 之间只能同时使用一个。</li>
</ul>
</li>
</ul>
<h3 id="day03"><a href="#day03" class="headerlink" title="day03"></a>day03</h3><h4 id="4-5-获取主键自增数据"><a href="#4-5-获取主键自增数据" class="headerlink" title="4.5 获取主键自增数据"></a>4.5 获取主键自增数据</h4><ul>
<li>useGeneratedKeys：启用主键生成策略</li>
<li>keyProperty：设置存储属性值</li>
</ul>
<h4 id="4-6-获取数据库受影响行数"><a href="#4-6-获取数据库受影响行数" class="headerlink" title="4.6 获取数据库受影响行数"></a>4.6 获取数据库受影响行数</h4><ul>
<li>直接将接口中方法的返回值设置为int或boolean即可<ul>
<li>int：代表受影响行数</li>
<li>boolean<ul>
<li>true：表示对数据库有影响</li>
<li>false：表示对数据库无影响</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="第五章-Mybatis中参数传递问题"><a href="#第五章-Mybatis中参数传递问题" class="headerlink" title="第五章 Mybatis中参数传递问题"></a>第五章 Mybatis中参数传递问题</h3><h4 id="5-1-单个普通参数"><a href="#5-1-单个普通参数" class="headerlink" title="5.1 单个普通参数"></a>5.1 单个普通参数</h4><ul>
<li>可以任意使用：参数数据类型、参数名称不用考虑</li>
</ul>
<h4 id="5-2-多个普通参数"><a href="#5-2-多个普通参数" class="headerlink" title="5.2 多个普通参数"></a>5.2 多个普通参数</h4><ul>
<li>Mybatis底层封装Map结构，封装key为param1、param2….【支持：arg0、arg1、…】</li>
</ul>
<h4 id="5-3-命名参数"><a href="#5-3-命名参数" class="headerlink" title="5.3 命名参数"></a>5.3 命名参数</h4><ul>
<li><p>语法：</p>
<ul>
<li>@Param(value&#x3D;”参数名”)</li>
<li>@Param(“参数名”)</li>
</ul>
</li>
<li><p>位置：参数前面</p>
</li>
<li><p>注意：</p>
<ul>
<li>底层封装Map结构</li>
<li>命名参数，依然支持参数【param1,param2,…】</li>
</ul>
</li>
<li><p>示例代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过员工姓名及薪资查询员工信息【命名参数】</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">selectEmpByNamed</span><span class="params">(<span class="meta">@Param(&quot;lName&quot;)</span>String lastName,</span></span><br><span class="line"><span class="params">                                       <span class="meta">@Param(&quot;salary&quot;)</span> <span class="type">double</span> salary)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpByNamed&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">    SELECT</span><br><span class="line">        id,</span><br><span class="line">        last_name,</span><br><span class="line">        email,</span><br><span class="line">        salary</span><br><span class="line">    FROM</span><br><span class="line">        tbl_employee</span><br><span class="line">    WHERE</span><br><span class="line">        last_name=#&#123;param1&#125;</span><br><span class="line">    AND</span><br><span class="line">        salary=#&#123;param2&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>源码分析</p>
<ul>
<li><p>MapperMethod对象：142行代码【命名参数底层代码入口】</p>
</li>
<li><p><strong>命名参数底层封装map为ParamMap，ParamMap继承HashMap</strong></p>
</li>
<li><p>ParamNameResolver对象：130行代码，命名参数底层实现逻辑</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//130行</span></span><br><span class="line"><span class="keyword">final</span> Map&lt;String, Object&gt; param = <span class="keyword">new</span> <span class="title class_">ParamMap</span>&lt;&gt;();</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;Integer, String&gt; entry : names.entrySet()) &#123;</span><br><span class="line">  param.put(entry.getValue(), args[entry.getKey()]);</span><br><span class="line">  <span class="comment">// add generic param names (param1, param2, ...)</span></span><br><span class="line">  <span class="keyword">final</span> <span class="type">String</span> <span class="variable">genericParamName</span> <span class="operator">=</span> GENERIC_NAME_PREFIX + (i + <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// ensure not to overwrite parameter named with @Param</span></span><br><span class="line">  <span class="keyword">if</span> (!names.containsValue(genericParamName)) &#123;</span><br><span class="line">    param.put(genericParamName, args[entry.getKey()]);</span><br><span class="line">  &#125;</span><br><span class="line">  i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> param;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="5-4-POJO参数"><a href="#5-4-POJO参数" class="headerlink" title="5.4 POJO参数"></a>5.4 POJO参数</h4><ul>
<li>Mybatis支持POJO【JavaBean】入参，参数key是POJO中属性</li>
</ul>
<h4 id="5-5-Map参数"><a href="#5-5-Map参数" class="headerlink" title="5.5 Map参数"></a>5.5 Map参数</h4><ul>
<li>Mybatis支持直接Map入参，map的key&#x3D;参数key</li>
</ul>
<h4 id="5-6-Collection-List-Array等参数"><a href="#5-6-Collection-List-Array等参数" class="headerlink" title="5.6 Collection|List|Array等参数"></a>5.6 Collection|List|Array等参数</h4><ul>
<li>参数名：collection、list、array</li>
</ul>
<h3 id="第六章-Mybatis参数传递【-与-区别】"><a href="#第六章-Mybatis参数传递【-与-区别】" class="headerlink" title="第六章 Mybatis参数传递【#与$区别】"></a>第六章 Mybatis参数传递【#与$区别】</h3><h4 id="6-1-回顾JDBC"><a href="#6-1-回顾JDBC" class="headerlink" title="6.1 回顾JDBC"></a>6.1 回顾JDBC</h4><ul>
<li>DriverManager</li>
<li>Connection</li>
<li><strong>Statement</strong>：执行SQL语句，入参使用SQL【String】拼接方式</li>
<li><strong>PreparedStatement</strong>执行SQL语句【预编译SQL】，入参使用占位符方式</li>
<li>ResultSet</li>
</ul>
<h4 id="6-2-与-区别"><a href="#6-2-与-区别" class="headerlink" title="6.2 #与$区别"></a>6.2 #与$区别</h4><ul>
<li>【#】底层执行SQL语句的对象，使用<strong>PreparedStatementd</strong>，预编译SQL，防止SQL注入安全隐患，相对比较安全。</li>
<li>【$】底层执行SQL语句的对象使用<strong>Statement</strong>对象，未解决SQL注入安全隐患，相对不安全。</li>
</ul>
<h4 id="6-3-与-使用场景"><a href="#6-3-与-使用场景" class="headerlink" title="6.3 #与$使用场景"></a>6.3 #与$使用场景</h4><blockquote>
<p>查询SQL：select col,col2 from table1 where col&#x3D;? and col2&#x3D;?  group by ?, order by ?  limit ?,?</p>
</blockquote>
<ul>
<li><p>#使用场景，sql占位符位置均可以使用#</p>
</li>
<li><p>$使用场景，#解决不了的参数传递问题，均可以交给$处理【如：form 动态化表名】</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试$使用场景</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">selectEmpByDynamitTable</span><span class="params">(<span class="meta">@Param(&quot;tblName&quot;)</span> String tblName)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpByDynamitTable&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">    SELECT</span><br><span class="line">        id,</span><br><span class="line">        last_name,</span><br><span class="line">        email,</span><br><span class="line">        salary</span><br><span class="line">    FROM</span><br><span class="line">        $&#123;tblName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="第七章-Mybatis查询中返回值四种情况"><a href="#第七章-Mybatis查询中返回值四种情况" class="headerlink" title="第七章 Mybatis查询中返回值四种情况"></a>第七章 Mybatis查询中返回值四种情况</h3><h4 id="7-1-查询单行数据返回单个对象"><a href="#7-1-查询单行数据返回单个对象" class="headerlink" title="7.1 查询单行数据返回单个对象"></a>7.1 查询单行数据返回单个对象</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过id获取员工信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">selectEmpById</span><span class="params">(<span class="type">int</span> empId)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">    SELECT</span><br><span class="line">        id,</span><br><span class="line">        last_name,</span><br><span class="line">        email,</span><br><span class="line">        salary</span><br><span class="line">    FROM</span><br><span class="line">        tbl_employee</span><br><span class="line">    WHERE</span><br><span class="line">        id=#&#123;empId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-2-查询多行数据返回对象的集合"><a href="#7-2-查询多行数据返回对象的集合" class="headerlink" title="7.2 查询多行数据返回对象的集合"></a>7.2 查询多行数据返回对象的集合</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询所有员工信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">selectAllEmps</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAllEmps&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">    SELECT</span><br><span class="line">        id,</span><br><span class="line">        last_name,</span><br><span class="line">        email,</span><br><span class="line">        salary</span><br><span class="line">    FROM</span><br><span class="line">        tbl_employee</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注意：如果返回的是集合，那应该设置为<strong>集合包含的类型</strong>，而不是集合本身的类型。</li>
</ul>
<h4 id="7-3-查询单行数据返回Map集合"><a href="#7-3-查询单行数据返回Map集合" class="headerlink" title="7.3 查询单行数据返回Map集合"></a>7.3 查询单行数据返回Map集合</h4><ul>
<li><p>Map&lt;String key,Object value&gt;</p>
<ul>
<li>字段作为Map的key，查询结果作为Map的Value</li>
</ul>
</li>
<li><p>示例代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询单行数据返回Map集合</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title function_">selectEmpReturnMap</span><span class="params">(<span class="type">int</span> empId)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    查询单行数据返回Map集合--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpReturnMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    SELECT</span><br><span class="line">        id,</span><br><span class="line">        last_name,</span><br><span class="line">        email,</span><br><span class="line">        salary</span><br><span class="line">    FROM</span><br><span class="line">    	tbl_employee</span><br><span class="line">    WHERE</span><br><span class="line">    	id=#&#123;empId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="7-4-查询多行数据返回Map集合"><a href="#7-4-查询多行数据返回Map集合" class="headerlink" title="7.4 查询多行数据返回Map集合"></a>7.4 查询多行数据返回Map集合</h4><ul>
<li><p>Map&lt;Integer key,Employee value&gt;</p>
<ul>
<li>对象的id作为key</li>
<li>对象作为value</li>
</ul>
</li>
<li><p>示例代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询多行数据返回Map</span></span><br><span class="line"><span class="comment"> * Map&lt;Integer,Object&gt;</span></span><br><span class="line"><span class="comment"> * Map&lt;Integer,Employee&gt;</span></span><br><span class="line"><span class="comment"> *      对象Id作为：key</span></span><br><span class="line"><span class="comment"> *      对象作为：value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@MapKey(&quot;id&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Map&lt;Integer,Employee&gt; <span class="title function_">selectEmpsReturnMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpsReturnMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    SELECT</span><br><span class="line">        id,</span><br><span class="line">        last_name,</span><br><span class="line">        email,</span><br><span class="line">        salary</span><br><span class="line">    FROM</span><br><span class="line">        tbl_employee</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="第八章-Mybatis中自动映射与自定义映射"><a href="#第八章-Mybatis中自动映射与自定义映射" class="headerlink" title="第八章 Mybatis中自动映射与自定义映射"></a>第八章 Mybatis中自动映射与自定义映射</h3><blockquote>
<p>自动映射【resultType】</p>
<p>自定义映射【resultMap】</p>
</blockquote>
<h4 id="8-1-自动映射与自定义映射"><a href="#8-1-自动映射与自定义映射" class="headerlink" title="8.1 自动映射与自定义映射"></a>8.1 自动映射与自定义映射</h4><ul>
<li>自动映射【resultType】：指的是自动将表中的字段与类中的属性进行关联映射<ul>
<li>自动映射解决不了两类问题	<ul>
<li><strong>多表连接查询时，需要返回多张表的结果集</strong></li>
<li>单表查询时，不支持驼峰式自动映射【不想为字段定义别名】</li>
</ul>
</li>
</ul>
</li>
<li>自定义映射【resultMap】：自动映射解决不了问题，交给自定义映射</li>
<li>注意：resultType与resultMap只能同时使用一个</li>
</ul>
<h4 id="8-2-自定义映射-级联映射"><a href="#8-2-自定义映射-级联映射" class="headerlink" title="8.2 自定义映射-级联映射"></a>8.2 自定义映射-级联映射</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    自定义映射 【员工与部门关系】--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empAndDeptResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  定义主键字段与属性关联关系 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  定义非主键字段与属性关联关系--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;salary&quot;</span> <span class="attr">property</span>=<span class="string">&quot;salary&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        为员工中所属部门，自定义关联关系--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.deptId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.deptName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpAndDeptByEmpId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empAndDeptResultMap&quot;</span>&gt;</span></span><br><span class="line">   SELECT</span><br><span class="line">        e.`id`,</span><br><span class="line">        e.`email`,</span><br><span class="line">        e.`last_name`,</span><br><span class="line">        e.`salary`,</span><br><span class="line">        d.`dept_id`,</span><br><span class="line">        d.`dept_name`</span><br><span class="line">    FROM</span><br><span class="line">        tbl_employee e,</span><br><span class="line">        tbl_dept d</span><br><span class="line">    WHERE</span><br><span class="line">        e.`dept_id` = d.`dept_id`</span><br><span class="line">    AND</span><br><span class="line">        e.`id` = #&#123;empId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-3-自定义映射-association映射"><a href="#8-3-自定义映射-association映射" class="headerlink" title="8.3 自定义映射-association映射"></a>8.3 自定义映射-association映射</h4><ul>
<li><p>特点：解决一对一映射关系【多对一】</p>
</li>
<li><p>示例代码</p>
<ul>
<li><pre><code class="xml">&lt;!--    自定义映射 【员工与部门关系】--&gt;
&lt;resultMap id=&quot;empAndDeptResultMapAssociation&quot; type=&quot;employee&quot;&gt;
    &lt;!--  定义主键字段与属性关联关系 --&gt;
    &lt;id column=&quot;id&quot; property=&quot;id&quot;&gt;&lt;/id&gt;
    &lt;!--  定义非主键字段与属性关联关系--&gt;
    &lt;result column=&quot;last_name&quot; property=&quot;lastName&quot;&gt;&lt;/result&gt;
    &lt;result column=&quot;email&quot; property=&quot;email&quot;&gt;&lt;/result&gt;
    &lt;result column=&quot;salary&quot; property=&quot;salary&quot;&gt;&lt;/result&gt;
    &lt;!--        为员工中所属部门，自定义关联关系--&gt;
    &lt;association property=&quot;dept&quot;
                javaType=&quot;com.atguigu.mybatis.pojo.Dept&quot;&gt;
        &lt;id column=&quot;dept_id&quot; property=&quot;deptId&quot;&gt;&lt;/id&gt;
        &lt;result column=&quot;dept_name&quot; property=&quot;deptName&quot;&gt;&lt;/result&gt;
    &lt;/association&gt;
&lt;/resultMap&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 8.4 自定义映射-collection映射</span><br><span class="line"></span><br><span class="line">- 示例代码</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  /**</span><br><span class="line">   * 通过部门id获取部门信息，及部门所属员工信息</span><br><span class="line">   */</span><br><span class="line">  public Dept selectDeptAndEmpByDeptId(int deptId);</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;deptAndempResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;deptId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;deptName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;empList&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">ofType</span>=<span class="string">&quot;com.atguigu.mybatis.pojo.Employee&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;salary&quot;</span> <span class="attr">property</span>=<span class="string">&quot;salary&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectDeptAndEmpByDeptId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptAndempResultMap&quot;</span>&gt;</span></span><br><span class="line">    SELECT</span><br><span class="line">        e.`id`,</span><br><span class="line">        e.`email`,</span><br><span class="line">        e.`last_name`,</span><br><span class="line">        e.`salary`,</span><br><span class="line">        d.`dept_id`,</span><br><span class="line">        d.`dept_name`</span><br><span class="line">    FROM</span><br><span class="line">        tbl_employee e,</span><br><span class="line">        tbl_dept d</span><br><span class="line">    WHERE</span><br><span class="line">        e.`dept_id` = d.`dept_id`</span><br><span class="line">    AND</span><br><span class="line">        d.dept_id = #&#123;deptId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-5-ResultMap相关标签及属性"><a href="#8-5-ResultMap相关标签及属性" class="headerlink" title="8.5 ResultMap相关标签及属性"></a>8.5 ResultMap相关标签及属性</h4><ul>
<li><p>resultMap标签：自定义映射标签</p>
<ul>
<li>id属性：定义唯一标识</li>
<li>type属性：设置映射类型</li>
</ul>
</li>
<li><p>resultMap子标签</p>
<ul>
<li>id标签：定义主键字段与属性关联关系</li>
<li>result标签：定义非主键字段与属性关联关系<ul>
<li>column属性：定义表中字段名称</li>
<li>property属性：定义类中属性名称</li>
</ul>
</li>
<li><strong>association标签</strong>：定义一对一的关联关系<ul>
<li>property：定义关联关系属性</li>
<li>javaType：定义关联关系属性的类型</li>
<li>select：设置分步查询SQL全路径</li>
<li>colunm：设置分步查询SQL中需要参数</li>
<li>fetchType：设置局部延迟加载【懒加载】是否开启</li>
</ul>
</li>
<li><strong>collection标签</strong>：定义一对多的关联关系<ul>
<li>property：定义一对一关联关系属性</li>
<li>ofType：定义一对一关联关系属性类型</li>
<li>fetchType：设置局部延迟加载【懒加载】是否开启</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="8-6-Mybatis中分步查询"><a href="#8-6-Mybatis中分步查询" class="headerlink" title="8.6 Mybatis中分步查询"></a>8.6 Mybatis中分步查询</h4><ul>
<li><p>为什么使用分步查询【分步查询优势】？</p>
<ul>
<li>将多表连接查询，改为【分步单表查询】，从而提高程序运行效率</li>
</ul>
</li>
<li><p>示例代码</p>
<ul>
<li><p>一对一</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过员工id获取员工信息及员工所属的部门信息【分步查询】</span></span><br><span class="line"><span class="comment">        1. 先通过员工id获取员工信息【id、last_name、email、salary、dept_id】</span></span><br><span class="line"><span class="comment">        2. 再通过部门id获取部门信息【dept_id、dept_name】</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">selectEmpAndDeptByEmpIdAssociationStep</span><span class="params">(<span class="type">int</span> empId)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpAndDeptByEmpIdAssociationStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empAndDeptResultMapAssocationStep&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">        id,</span><br><span class="line">        last_name,</span><br><span class="line">        email,</span><br><span class="line">        salary,</span><br><span class="line">        dept_id</span><br><span class="line">    from</span><br><span class="line">        tbl_employee</span><br><span class="line">    where</span><br><span class="line">        id=#&#123;empId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过部门id获取部门信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Dept <span class="title function_">selectDeptByDeptId</span><span class="params">(<span class="type">int</span> deptId)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectDeptByDeptId&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">        dept_id,</span><br><span class="line">        dept_name</span><br><span class="line">    from</span><br><span class="line">        tbl_dept</span><br><span class="line">    where</span><br><span class="line">        dept_id=#&#123;deptId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="day04"><a href="#day04" class="headerlink" title="day04"></a>day04</h4><ul>
<li><p>一对多</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过部门id获取部门信息，及部门所属员工信息【分步查询】</span></span><br><span class="line"><span class="comment">        1. 通过部门id获取部门信息</span></span><br><span class="line"><span class="comment">        2. 通过部门id获取员工信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Dept <span class="title function_">selectDeptAndEmpByDeptIdStep</span><span class="params">(<span class="type">int</span> deptId)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    通过部门id获取部门信息，及部门所属员工信息【分步查询】--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    1. 通过部门id获取部门信息--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    2. 通过部门id获取员工信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectDeptAndEmpByDeptIdStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptAndEmpResultMapStep&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            dept_id,</span><br><span class="line">            dept_name</span><br><span class="line">        from</span><br><span class="line">            tbl_dept</span><br><span class="line">        where</span><br><span class="line">            dept_id=#&#123;deptId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通过部门Id获取员工信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> deptId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">selectEmpByDeptId</span><span class="params">(<span class="type">int</span> deptId)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpByDeptId&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">        id,</span><br><span class="line">        last_name,</span><br><span class="line">        email,</span><br><span class="line">        salary,</span><br><span class="line">        dept_id</span><br><span class="line">    from</span><br><span class="line">        tbl_employee</span><br><span class="line">    where</span><br><span class="line">        dept_id=#&#123;deptId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-7-Mybatis延迟加载【懒加载】"><a href="#8-7-Mybatis延迟加载【懒加载】" class="headerlink" title="8.7 Mybatis延迟加载【懒加载】"></a>8.7 Mybatis延迟加载【懒加载】</h4><ul>
<li><p>需要时加载，不需要暂时不加载</p>
</li>
<li><p>优势：提升程序运行效率</p>
</li>
<li><p>语法</p>
<ul>
<li><p>全局设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 开启延迟加载 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设置加载的数据是按需加载3.4.2及以后的版本该步骤可省略--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;aggressiveLazyLoading&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>局部设置</p>
<ul>
<li><p>fetchType</p>
<ul>
<li>eager：关闭局部延迟加载</li>
<li>lazy：开启局部延迟加载</li>
</ul>
</li>
<li><p>示例代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">select</span>=<span class="string">&quot;com.atguigu.mybatis.mapper.DeptMapper.selectDeptByDeptId&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">fetchType</span>=<span class="string">&quot;eager&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="8-8-扩展"><a href="#8-8-扩展" class="headerlink" title="8.8 扩展"></a>8.8 扩展</h4><ul>
<li><p>如果分步查询时，需要传递给调用的查询中多个参数，则需要将多个参数封装成</p>
<p>Map来进行传递，语法如下**: {k1&#x3D;v1, k2&#x3D;v2….}**</p>
</li>
</ul>
<h3 id="第九章-Mybatis动态SQL【重点】"><a href="#第九章-Mybatis动态SQL【重点】" class="headerlink" title="第九章 Mybatis动态SQL【重点】"></a>第九章 Mybatis动态SQL【重点】</h3><blockquote>
<p>SQL中注释</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//方式一</span><br><span class="line">-- 1=1</span><br><span class="line">//方式二【推荐使用】</span><br><span class="line"><span class="comment">&lt;!-- 1=1 --&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="9-1-动态SQL概述"><a href="#9-1-动态SQL概述" class="headerlink" title="9.1 动态SQL概述"></a>9.1 动态SQL概述</h4><ul>
<li>动态SQL指的是：SQL语句可动态化</li>
<li>Mybatis的动态SQL中支持OGNL表达式语言，OGNL（ Object Graph Navigation Language ）对象图导航语言</li>
</ul>
<h4 id="9-2-常用标签"><a href="#9-2-常用标签" class="headerlink" title="9.2 常用标签"></a>9.2 常用标签</h4><ul>
<li><p><strong>if标签</strong>：用于完成简单的判断</p>
</li>
<li><p><strong>where标签</strong>：用于解决where关键字及where后第一个and或or的问题</p>
</li>
<li><p><strong>trim标签</strong>： 可以在条件判断完的SQL语句前后添加或者去掉指定的字符</p>
<ul>
<li><p>prefix: 添加前缀</p>
</li>
<li><p>prefixOverrides: 去掉前缀</p>
</li>
<li><p>suffix: 添加后缀</p>
</li>
<li><p>suffixOverrides: 去掉后缀</p>
</li>
</ul>
</li>
<li><p><strong>set标签</strong>：主要用于解决set关键字及多出一个【，】问题</p>
</li>
<li><p><strong>choose标签</strong>：类似java中if-else【switch-case】结构</p>
</li>
<li><p><strong>foreach标签</strong>：类似java中for循环</p>
<ul>
<li>collection: 要迭代的集合</li>
<li>item: 当前从集合中迭代出的元素</li>
<li>separator: 元素与元素之间的分隔符</li>
<li>open: 开始字符</li>
<li>close:结束字符</li>
</ul>
</li>
<li><p><strong>sql标签</strong>：提取可重用SQL片段</p>
</li>
</ul>
<h4 id="9-3-示例代码"><a href="#9-3-示例代码" class="headerlink" title="9.3 示例代码"></a>9.3 示例代码</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatis.mapper.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;emp_col&quot;</span>&gt;</span></span><br><span class="line">        id,</span><br><span class="line">        last_name,</span><br><span class="line">        email,</span><br><span class="line">        salary</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;select_employee&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,</span><br><span class="line">            last_name,</span><br><span class="line">            email,</span><br><span class="line">            salary</span><br><span class="line">        from</span><br><span class="line">            tbl_employee</span><br><span class="line">    <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 按条件查询员工信息【条件不确定】--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpByOpr&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;select_employee&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">               and id = #&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;lastName != null&quot;</span>&gt;</span></span><br><span class="line">                and last_name = #&#123;lastName&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span></span><br><span class="line">                and email = #&#123;email&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;salary != null&quot;</span>&gt;</span></span><br><span class="line">                and salary = #&#123;salary&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpByOprTrim&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;select_employee&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">                id = #&#123;id&#125; and</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;lastName != null&quot;</span>&gt;</span></span><br><span class="line">                last_name = #&#123;lastName&#125; and</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span></span><br><span class="line">                email = #&#123;email&#125; and</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;salary != null&quot;</span>&gt;</span></span><br><span class="line">                salary = #&#123;salary&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateEmpByOpr&quot;</span>&gt;</span></span><br><span class="line">        update</span><br><span class="line">            tbl_employee</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;lastName != null&quot;</span>&gt;</span></span><br><span class="line">                last_name=#&#123;lastName&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span></span><br><span class="line">                email=#&#123;email&#125;,</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;salary != null&quot;</span>&gt;</span></span><br><span class="line">                salary=#&#123;salary&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where</span><br><span class="line">            id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpByOneOpr&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;emp_col&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        from</span><br><span class="line">            tbl_employee</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span></span><br><span class="line">                    id = #&#123;id&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;lastName != null&quot;</span>&gt;</span></span><br><span class="line">                    last_name = #&#123;lastName&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span></span><br><span class="line">                    email = #&#123;email&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;salary != null&quot;</span>&gt;</span></span><br><span class="line">                    salary = #&#123;salary&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                    1=1</span><br><span class="line">                <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectEmpByIds&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;employee&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,</span><br><span class="line">            last_name,</span><br><span class="line">            email,</span><br><span class="line">            salary</span><br><span class="line">        from</span><br><span class="line">            tbl_employee</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            id in(</span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">                #&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">            )</span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;batchInsertEmp&quot;</span>&gt;</span></span><br><span class="line">        INSERT INTO</span><br><span class="line">            tbl_employee(last_name,email,salary)</span><br><span class="line">        VALUES</span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;employees&quot;</span> <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">                (#&#123;emp.lastName&#125;,#&#123;emp.email&#125;,#&#123;emp.salary&#125;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="第十章-Mybatis中缓存机制"><a href="#第十章-Mybatis中缓存机制" class="headerlink" title="第十章 Mybatis中缓存机制"></a>第十章 Mybatis中缓存机制</h3><h4 id="10-1-缓存概述"><a href="#10-1-缓存概述" class="headerlink" title="10.1 缓存概述"></a>10.1 缓存概述</h4><ul>
<li>生活中缓存<ul>
<li>缓存一些音频、视频优势<ul>
<li>节约数据流量</li>
<li>提高播放性能</li>
</ul>
</li>
</ul>
</li>
<li>程序中缓存【Mybatis缓存】<ul>
<li>使用缓存优势<ul>
<li>提高查询效率</li>
<li>降低服务器压力</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="10-2-Mybatis中的缓存概述"><a href="#10-2-Mybatis中的缓存概述" class="headerlink" title="10.2 Mybatis中的缓存概述"></a>10.2 Mybatis中的缓存概述</h4><ul>
<li><p>一级缓存</p>
</li>
<li><p>二级缓存</p>
</li>
<li><p>第三方缓存</p>
<p><img src="/Mybatis/image-20220324141538764.png" alt="image-20220324141538764"></p>
</li>
</ul>
<h4 id="10-3-Mybatis缓存机制之一级缓存"><a href="#10-3-Mybatis缓存机制之一级缓存" class="headerlink" title="10.3 Mybatis缓存机制之一级缓存"></a>10.3 Mybatis缓存机制之一级缓存</h4><ul>
<li><p>概述：一级缓存【本地缓存（Local Cache）或SqlSession级别缓存】</p>
</li>
<li><p>特点</p>
<ul>
<li>一级缓存默认开启</li>
<li>不能关闭</li>
<li>可以清空</li>
</ul>
</li>
<li><p>缓存原理</p>
<ul>
<li>第一次获取数据时，先从数据库中加载数据，将数据缓存至Mybatis一级缓存中【缓存底层实现原理Map，key：hashCode+查询的SqlId+编写的sql查询语句+参数】</li>
<li>以后再次获取数据时，先从一级缓存中获取，<strong>如未获取到数据</strong>，再从数据库中获取数据。</li>
</ul>
</li>
<li><p><strong>一级缓存五种失效情况</strong></p>
<ol>
<li><p>不同的SqlSession对应不同的一级缓存</p>
</li>
<li><p>同一个SqlSession但是查询条件不同</p>
</li>
<li><p><strong>同一个SqlSession两次查询期间执行了任何一次增删改操作</strong></p>
</li>
</ol>
<p>	</p>
<ul>
<li>清空一级缓存</li>
</ul>
<ol start="4">
<li>同一个SqlSession两次查询期间手动清空了缓存</li>
</ol>
<ul>
<li><strong>sqlSession.clearCache()</strong></li>
</ul>
<ol start="5">
<li>同一个SqlSession两次查询期间提交了事务</li>
</ol>
<ul>
<li>sqlSession.commit()</li>
</ul>
</li>
</ul>
<h4 id="10-4-Mybatis缓存机制之二级缓存"><a href="#10-4-Mybatis缓存机制之二级缓存" class="headerlink" title="10.4 Mybatis缓存机制之二级缓存"></a>10.4 Mybatis缓存机制之二级缓存</h4><ul>
<li><p>二级缓存【second level cache】概述</p>
<ul>
<li>二级缓存【全局作用域缓存】</li>
<li>SqlSessionFactory级别缓存</li>
</ul>
</li>
<li><p>二级缓存特点</p>
<ul>
<li>二级缓存默认关闭，需要开启才能使用</li>
<li>二级缓存需要提交sqlSession或关闭sqlSession时，才会缓存。</li>
</ul>
</li>
<li><p>二级缓存使用的步骤:</p>
<p>① 全局配置文件中开启二级缓存<setting name="cacheEnabled" value="true"/></p>
<p>② 需要使用二级缓存的<strong>映射文件处</strong>使用cache配置缓存<cache /></p>
<p>③ 注意：POJO需要实现Serializable接口</p>
<p><img src="/Mybatis/image-20220324151903793.png" alt="image-20220324151903793"></p>
<p>④ <strong>关闭sqlSession或提交sqlSession时，将数据缓存到二级缓存</strong></p>
</li>
<li><p>二级缓存底层原理</p>
<ul>
<li>第一次获取数据时，先从数据库中获取数据，将数据缓存至一级缓存；当提交或关闭SqlSession时，将数据缓存至二级缓存</li>
<li>以后再次获取数据时，先从一级缓存中获取数据，如一级缓存没有指定数据，再去二级缓存中获取数据。如二级缓存也没有指定数据时，需要去数据库中获取数据，……</li>
</ul>
</li>
<li><p>二级缓存相关属性</p>
<ul>
<li>eviction&#x3D;“FIFO”：缓存清除【回收】策略。<ul>
<li>LRU – 最近最少使用的：移除最长时间不被使用的对象。</li>
<li>FIFO – 先进先出：按对象进入缓存的顺序来移除它们。</li>
</ul>
</li>
<li>flushInterval：刷新间隔，单位毫秒</li>
<li>size：引用数目，正整数</li>
<li>readOnly：只读，true&#x2F;false</li>
</ul>
</li>
<li><p>二级缓存的失效情况</p>
<ul>
<li>在两次查询之间，执行增删改操作，会同时清空一级缓存和二级缓存</li>
<li>sqlSession.clearCache()：只是用来清除一级缓存。</li>
</ul>
</li>
</ul>
<h4 id="10-5-Mybatis中缓存机制之第三方缓存"><a href="#10-5-Mybatis中缓存机制之第三方缓存" class="headerlink" title="10.5 Mybatis中缓存机制之第三方缓存"></a>10.5 Mybatis中缓存机制之第三方缓存</h4><ul>
<li><p>第三方缓存：EhCache</p>
</li>
<li><p>EhCache 是一个纯Java的进程内缓存框架</p>
</li>
<li><p>使用步骤</p>
<ul>
<li><p>导入jar包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatis-ehcache --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.caches<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- slf4j-log4j12 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写配置文件【ehcache.xml】</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;../config/ehcache.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 磁盘保存路径 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">&quot;E:\mybatis\ehcache&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span></span></span><br><span class="line"><span class="tag">            <span class="attr">maxElementsInMemory</span>=<span class="string">&quot;512&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">maxElementsOnDisk</span>=<span class="string">&quot;10000000&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">eternal</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">overflowToDisk</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">timeToIdleSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">timeToLiveSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">&quot;LRU&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>加载第三方缓存【映射文件】</p>
</li>
<li><p>开始使用</p>
</li>
</ul>
</li>
<li><p>注意事项</p>
<ul>
<li>第三方缓存，需要建立在二级缓存基础上【需要开启二级缓存，第三方缓存才能生效】</li>
<li>如何让第三方缓存失效【将二级缓存设置失效即可】</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://sktt1-zeus.top">Zeus</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://sktt1-zeus.top/2022/05/19/Mybatis/">http://sktt1-zeus.top/2022/05/19/Mybatis/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://sktt1-zeus.top" target="_blank">Zeus's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Mybatis/">Mybatis</a></div><div class="post-share"><div class="social-share" data-image="/img/toububeijing.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2022/05/19/Design-patterns/" title="Design-patterns"><img class="cover" src="/img/toububeijing.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Design-patterns</div></div><div class="info-2"><div class="info-item-1">  🎉 Ultra-simplified explanation to design patterns! 🎉   A topic that can easily make anyone's mind wobble. Here I try to make them stick in to your mind (and maybe mine) by explaining them in the simplest way possible.     Check out my blog and say “hi” on Twitter.   IntroductionDesign patterns are solutions to recurring problems; guidelines on how to tackle certain problems. They are not classes, packages or libraries that you can plug into your application and wait for the magic to...</div></div></div></a><a class="pagination-related" href="/2022/05/19/Maven/" title="Maven"><img class="cover" src="/img/toububeijing.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Maven</div></div><div class="info-2"><div class="info-item-1">回顾：JavaSE   JavaWeb   SSM阶段   高级   项目阶段 …. JavaSE JDK  变量  数据类型  运算符  流程控制  数组   类和对象【JavaOOP】 集合与泛型  IO  常用类  反射  设计模式 网络编程   JDBC  Mysql …   JavaWeb【B&#x2F;S】 浏览器：HTML、CSS、JavaScript、Vue、Axios、Cookie … 服务器：Tomcat、Http、Servlet、Filter、Listener、Session、Thymeleaf…  SSM【Spring  SpringMVC  Mybatis】   Maven第一章...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/touxiang.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Zeus</div><div class="author-info-description">Just do it!</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/thevoid2021"><i class="fab fa-github"></i><span>🛴前往小家...</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/TheVoid2021" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="/thevoid7172024@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><center>主域名：<br><a href="https://sktt1-zeus.top"><b><font color="#5ea6e5">sktt1-zeus.top</font></b></a><br></center></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%88%9D%E8%AF%86Mybatis"><span class="toc-number">1.</span> <span class="toc-text">第一章 初识Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%A1%86%E6%9E%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 框架概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%9F%E6%B4%BB%E4%B8%AD%E2%80%9C%E6%A1%86%E6%9E%B6%E2%80%9D"><span class="toc-number">1.2.</span> <span class="toc-text">生活中“框架”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-Mybatis%E7%AE%80%E4%BB%8B"><span class="toc-number">1.3.</span> <span class="toc-text">1.2 Mybatis简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%AE%98%E7%BD%91%E5%9C%B0%E5%9D%80"><span class="toc-number">1.4.</span> <span class="toc-text">1.3 官网地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E6%90%AD%E5%BB%BAMybatis%E6%A1%86%E6%9E%B6"><span class="toc-number">2.</span> <span class="toc-text">第二章 搭建Mybatis框架</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%87%86%E5%A4%87"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 准备</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E6%90%AD%E5%BB%BAMybatis%E6%A1%86%E6%9E%B6%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 搭建Mybatis框架步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E6%B7%BB%E5%8A%A0Log4j%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 添加Log4j日志框架</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-Mybatis%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3%E3%80%90mybatis-config-xml%E3%80%91"><span class="toc-number">3.</span> <span class="toc-text">第三章 Mybatis核心配置详解【mybatis-config.xml】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 核心配置文件概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A0%B9%E6%A0%87%E7%AD%BE"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 核心配置文件根标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B8%B8%E7%94%A8%E5%AD%90%E6%A0%87%E7%AD%BE"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 核心配置文件常用子标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">3.4.</span> <span class="toc-text">4.1 映射文件概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E6%A0%B9%E6%A0%87%E7%AD%BE"><span class="toc-number">3.5.</span> <span class="toc-text">4.2 映射文件根标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E5%AD%90%E6%A0%87%E7%AD%BE"><span class="toc-number">3.6.</span> <span class="toc-text">4.3 映射文件子标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E4%B8%AD%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7"><span class="toc-number">3.7.</span> <span class="toc-text">4.4 映射文件中常用属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#day03"><span class="toc-number">4.</span> <span class="toc-text">day03</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E8%8E%B7%E5%8F%96%E4%B8%BB%E9%94%AE%E8%87%AA%E5%A2%9E%E6%95%B0%E6%8D%AE"><span class="toc-number">4.1.</span> <span class="toc-text">4.5 获取主键自增数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%97%E5%BD%B1%E5%93%8D%E8%A1%8C%E6%95%B0"><span class="toc-number">4.2.</span> <span class="toc-text">4.6 获取数据库受影响行数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-Mybatis%E4%B8%AD%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E9%97%AE%E9%A2%98"><span class="toc-number">5.</span> <span class="toc-text">第五章 Mybatis中参数传递问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%8D%95%E4%B8%AA%E6%99%AE%E9%80%9A%E5%8F%82%E6%95%B0"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 单个普通参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E5%A4%9A%E4%B8%AA%E6%99%AE%E9%80%9A%E5%8F%82%E6%95%B0"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 多个普通参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 命名参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-POJO%E5%8F%82%E6%95%B0"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 POJO参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-Map%E5%8F%82%E6%95%B0"><span class="toc-number">5.5.</span> <span class="toc-text">5.5 Map参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-6-Collection-List-Array%E7%AD%89%E5%8F%82%E6%95%B0"><span class="toc-number">5.6.</span> <span class="toc-text">5.6 Collection|List|Array等参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-Mybatis%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E3%80%90-%E4%B8%8E-%E5%8C%BA%E5%88%AB%E3%80%91"><span class="toc-number">6.</span> <span class="toc-text">第六章 Mybatis参数传递【#与$区别】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E5%9B%9E%E9%A1%BEJDBC"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 回顾JDBC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-%E4%B8%8E-%E5%8C%BA%E5%88%AB"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 #与$区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-%E4%B8%8E-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 #与$使用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-Mybatis%E6%9F%A5%E8%AF%A2%E4%B8%AD%E8%BF%94%E5%9B%9E%E5%80%BC%E5%9B%9B%E7%A7%8D%E6%83%85%E5%86%B5"><span class="toc-number">7.</span> <span class="toc-text">第七章 Mybatis查询中返回值四种情况</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-%E6%9F%A5%E8%AF%A2%E5%8D%95%E8%A1%8C%E6%95%B0%E6%8D%AE%E8%BF%94%E5%9B%9E%E5%8D%95%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 查询单行数据返回单个对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-%E6%9F%A5%E8%AF%A2%E5%A4%9A%E8%A1%8C%E6%95%B0%E6%8D%AE%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%9B%86%E5%90%88"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 查询多行数据返回对象的集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-%E6%9F%A5%E8%AF%A2%E5%8D%95%E8%A1%8C%E6%95%B0%E6%8D%AE%E8%BF%94%E5%9B%9EMap%E9%9B%86%E5%90%88"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 查询单行数据返回Map集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4-%E6%9F%A5%E8%AF%A2%E5%A4%9A%E8%A1%8C%E6%95%B0%E6%8D%AE%E8%BF%94%E5%9B%9EMap%E9%9B%86%E5%90%88"><span class="toc-number">7.4.</span> <span class="toc-text">7.4 查询多行数据返回Map集合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-Mybatis%E4%B8%AD%E8%87%AA%E5%8A%A8%E6%98%A0%E5%B0%84%E4%B8%8E%E8%87%AA%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84"><span class="toc-number">8.</span> <span class="toc-text">第八章 Mybatis中自动映射与自定义映射</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-%E8%87%AA%E5%8A%A8%E6%98%A0%E5%B0%84%E4%B8%8E%E8%87%AA%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 自动映射与自定义映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84-%E7%BA%A7%E8%81%94%E6%98%A0%E5%B0%84"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 自定义映射-级联映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84-association%E6%98%A0%E5%B0%84"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 自定义映射-association映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-5-ResultMap%E7%9B%B8%E5%85%B3%E6%A0%87%E7%AD%BE%E5%8F%8A%E5%B1%9E%E6%80%A7"><span class="toc-number">8.4.</span> <span class="toc-text">8.5 ResultMap相关标签及属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-6-Mybatis%E4%B8%AD%E5%88%86%E6%AD%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.5.</span> <span class="toc-text">8.6 Mybatis中分步查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#day04"><span class="toc-number">8.6.</span> <span class="toc-text">day04</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-7-Mybatis%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD%E3%80%90%E6%87%92%E5%8A%A0%E8%BD%BD%E3%80%91"><span class="toc-number">8.7.</span> <span class="toc-text">8.7 Mybatis延迟加载【懒加载】</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-8-%E6%89%A9%E5%B1%95"><span class="toc-number">8.8.</span> <span class="toc-text">8.8 扩展</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0-Mybatis%E5%8A%A8%E6%80%81SQL%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-number">9.</span> <span class="toc-text">第九章 Mybatis动态SQL【重点】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-%E5%8A%A8%E6%80%81SQL%E6%A6%82%E8%BF%B0"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 动态SQL概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-%E5%B8%B8%E7%94%A8%E6%A0%87%E7%AD%BE"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 常用标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">9.3.</span> <span class="toc-text">9.3 示例代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0-Mybatis%E4%B8%AD%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6"><span class="toc-number">10.</span> <span class="toc-text">第十章 Mybatis中缓存机制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-%E7%BC%93%E5%AD%98%E6%A6%82%E8%BF%B0"><span class="toc-number">10.1.</span> <span class="toc-text">10.1 缓存概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-Mybatis%E4%B8%AD%E7%9A%84%E7%BC%93%E5%AD%98%E6%A6%82%E8%BF%B0"><span class="toc-number">10.2.</span> <span class="toc-text">10.2 Mybatis中的缓存概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-3-Mybatis%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E4%B9%8B%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">10.3.</span> <span class="toc-text">10.3 Mybatis缓存机制之一级缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-4-Mybatis%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E4%B9%8B%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">10.4.</span> <span class="toc-text">10.4 Mybatis缓存机制之二级缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-Mybatis%E4%B8%AD%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E4%B9%8B%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BC%93%E5%AD%98"><span class="toc-number">10.5.</span> <span class="toc-text">10.5 Mybatis中缓存机制之第三方缓存</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url(/img/dibubeijing.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 By Zeus</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      pjax.loadUrl('/404.html')
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v7.3.0" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v5.2.2" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" data-title="本站使用JsDelivr为静态资源提供CDN加速" title=""><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用双线部署，默认线路托管于Vercel" title=""><img src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用双线部署，联通线路托管于Coding" title=""><img src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&amp;logo=Codio" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>